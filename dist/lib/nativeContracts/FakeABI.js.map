{"version":3,"file":"FakeABI.js","names":["_rskUtils","require","_utils","btcUtils","_interopRequireWildcard","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","FakeABI","network","decodeBtcTxHash","data","remove0x","length","buffer","Buffer","from","add0x","toString","decodeArray","map","d","Array","isArray","decodeFederationData","a160","keys","address","h160toAddress","prefixKey","rskAddressFromBtcPublicKey","commitFederationDecoder","decoded","rlp","decode","oldData","newData","block","oldFederationAddress","oldFederationMembers","newFederationAddress","newFederationMembers","freeze","addSignatureDataToAbi","anonymous","inputs","indexed","name","type","_filter","_decoder"],"sources":["../../../src/lib/nativeContracts/FakeABI.js"],"sourcesContent":["\nimport { remove0x, add0x, rlp } from '@rsksmart/rsk-utils'\nimport { addSignatureDataToAbi } from '../utils'\nimport * as btcUtils from '../btcUtils'\n\nexport default function FakeABI (network) {\n  const decodeBtcTxHash = data => {\n    if (remove0x(data).length === 128) {\n      let buffer = Buffer.from(remove0x(data), 'hex')\n      data = add0x(buffer.toString('ascii'))\n    }\n    return data\n  }\n  const decodeArray = data => data.map(d => Array.isArray(d) ? decodeArray(d) : add0x(d.toString('hex')))\n\n  const decodeFederationData = data => {\n    let [a160, keys] = data\n    let address = btcUtils.h160toAddress(a160, { prefixKey: 'scriptHash', network }).toString('hex')\n    keys = keys.map(d => btcUtils.rskAddressFromBtcPublicKey(d.toString('hex')))\n    return [address, keys]\n  }\n\n  const commitFederationDecoder = data => {\n    const decoded = rlp.decode(data)\n    let [oldData, newData, block] = decoded\n    let [oldFederationAddress, oldFederationMembers] = decodeFederationData(oldData)\n    let [newFederationAddress, newFederationMembers] = decodeFederationData(newData)\n    block = block.toString('ascii')\n    return [oldFederationAddress, oldFederationMembers, newFederationAddress, newFederationMembers, block]\n  }\n  return Object.freeze(addSignatureDataToAbi([\n    { // Remasc events\n      anonymous: false,\n      inputs: [\n        {\n          indexed: true,\n          name: 'to',\n          type: 'address'\n        },\n        {\n          indexed: false,\n          name: 'blockHash',\n          type: 'string'\n        },\n        {\n          indexed: false,\n          name: 'value',\n          type: 'uint256'\n        }\n      ],\n      name: 'mining_fee_topic',\n      type: 'event'\n    },\n    { // Bridge events\n      inputs: [\n        {\n          indexed: false,\n          name: 'btcTxHash',\n          type: 'string'\n        },\n        {\n          indexed: false,\n          name: 'btcTx', // raw tx?\n          type: 'string'\n        }\n      ],\n      name: 'release_btc_topic',\n      type: 'event'\n    },\n    {\n      inputs: [\n        {\n          indexed: false,\n          name: 'sender',\n          type: 'address'\n        }\n      ],\n      name: 'update_collections_topic',\n      type: 'event'\n    },\n    {\n      inputs: [\n        {\n          indexed: false,\n          name: 'btcTxHash',\n          type: 'string',\n          _filter: decodeBtcTxHash\n        },\n        {\n          indexed: false,\n          name: 'federatorPublicKey',\n          type: 'string'\n        },\n        {\n          indexed: false,\n          name: 'rskTxHash',\n          type: 'string'\n        }\n      ],\n      name: 'add_signature_topic',\n      type: 'event'\n    },\n    {\n      inputs: [\n        {\n          indexed: false,\n          name: 'oldFederationAddress',\n          type: 'string'\n        },\n        {\n          indexed: false,\n          name: 'oldFederationMembers',\n          type: 'address[]'\n        },\n        {\n          indexed: false,\n          name: 'newFederationAddress',\n          type: 'string'\n        },\n        {\n          indexed: false,\n          name: 'newFederationMembers',\n          type: 'address[]'\n        },\n        {\n          indexed: false,\n          name: 'activationBlockNumber',\n          type: 'string'\n        }\n      ],\n      name: 'commit_federation_topic',\n      type: 'event',\n      _decoder: commitFederationDecoder\n    }\n  ]))\n}\n"],"mappings":"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"}